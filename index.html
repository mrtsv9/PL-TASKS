<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <!-- <script src="js/myScript.js"></script> -->
</head>

<body>

    <div class="form">
        <select id="products">
            <option id="seledka1" value="100">Селедка над шубой</option>
            <option id="seledka2" value="200">Селедка под шубой</option>
            <option id="seledka3" value="300">Селедка возле шубы</option>
            <option id="seledka4" value="400">Селедка между шубой</option>
        </select>
        <input id="amount" type="number" value="10" placeholder="Количество продуктов">
        <button id="add" onclick="onadd()">Добавить</button>

    <table>
        <tr>
            <th>Наименование блюда</th>
            <th>Количество</th>
            <th>Калорийность</th>
            <th>Общая Калорийность</th>
        </tr>

        <tbody id="rows">

        </tbody>

    </table>

    <h2>Суммарная калорийность: </h2>
    <p id="total"></p>


    <script>

        function onadd() {
            var n = document.getElementById("products").options.selectedIndex;
            var name = document.getElementById("products").options[n].text;
            var calories = document.getElementById("products").options[n].value;
            var amount = document.getElementById("amount").value;
            find(name, calories, amount);
        }

        function find(name, calories, amount) {
            let tempCalories = parseInt(calories);
            let tempAmount = parseInt(amount);
            
            var table = document.getElementsByClassName(name);
            var Row = document.getElementById(name);
            if (Row != null) {
                var count = Row.getElementsByClassName('amount');
                var total = Row.getElementsByClassName("total");
                let param = parseInt(count[0].innerText);
                if (tempAmount > 0) {
                    total[0].innerText = (param + tempCalories) * tempAmount;
                    count[0].innerText = param + amount;
                }
            }
            else {
                let length = table.length;
                if (length == 0) {
                    if (amount > 0) {
                        addRow(name, amount, calories);
                    }
                }
            }

        }
    

        function addRow(name, calories, amount) {
            var table = document.getElementById('rows');

            if (name != null) {
                var tr = document.createElement("tr");
                tr.id = name;

                tr.innerHTML = '<tr class="name">' + name + '</tr> <tr class="calories">' + calories
                    + '</tr> <tr class="amount">'
                    + amount + '</th> <tr class="total">'
                    + calories * amount + '</th>';

                table.appendChild(tr);
            }
            else {
                alert("Пустое имя")
            }
        }

    </script>

    <!-- <script src="js/myScript.js"></script> -->

</body>

</html>